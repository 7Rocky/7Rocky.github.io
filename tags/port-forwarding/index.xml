<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Port-Forwarding on Blog de 7Rocky. Ciberseguridad y Mates</title><link>https://7rocky.github.io/tags/port-forwarding/</link><description>Recent content in Port-Forwarding on Blog de 7Rocky. Ciberseguridad y Mates</description><generator>Hugo</generator><language>es</language><lastBuildDate>Mon, 09 Sep 2024 00:06:26 +0200</lastBuildDate><atom:link href="https://7rocky.github.io/tags/port-forwarding/index.xml" rel="self" type="application/rss+xml"/><item><title>RegistryTwo</title><link>https://7rocky.github.io/htb/registrytwo/</link><pubDate>Sat, 03 Feb 2024 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/registrytwo/</guid><description>Hack The Box. Linux. Máquina insana. Esta máquina expone una aplicación web que permite crear dominios personalizados con código HTML. Además, hay un registro de Docker expuesto en el que podemos descargar &lt;em>blobs&lt;/em> de imágenes de Docker después de obtener un &lt;em>token&lt;/em> JWT adecuado. La aplicación web ejecuta un archivo WAR con Tomcat, podemos descompilarlo y ver que consulta un servidor RMI. Dado que Tomcat está detrás de un &lt;em>proxy&lt;/em> inverso de nginx, podemos acceder a algunos &lt;em>servlets&lt;/em> sensibles de Tomcat para modificar nuestra sesión y establecer permisos de administrador en la aplicación web. Necesitamos esto para modificar la configuración de RMI utilizando una vulnerabilidad de asignación en masa y apuntar el servidor RMI a nosotros. Después de eso, podemos explotar una vulnerabilidad de deserialización insegura en Java para obtener RCE en un contenedor. Luego, podemos interactuar con el servidor RMI legítimo utilizando un reenvío de puertos. Este servidor nos permite leer archivos arbitrarios con un ataque de navegación de directorios. Podemos encontrar una contraseña en texto claro para el usuario &lt;code>developer&lt;/code>, que se reutiliza en SSH. Luego, &lt;code>root&lt;/code> ejecuta un archivo JAR para analizar archivos del sitio web de &lt;em>hosting&lt;/em> enviándolos a un servidor ClamAV. El problema aquí es que el JAR llama a las funciones del registro RMI, que se reinicia periódicamente. Por lo tanto, podemos elaborar un registro de RMI malicioso y una explotación para ganar una condición de carrera y ocupar el puerto, de modo que &lt;code>root&lt;/code> consulte nuestro servidor ClamAV falso. El resultado será que todos los archivos en &lt;code>/root&lt;/code> se pondrán en cuarentena dentro de un directorio legible, lo cual conduce a la escalada de privilegios</description></item><item><title>RainyDay</title><link>https://7rocky.github.io/htb/rainyday/</link><pubDate>Sat, 18 Feb 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/rainyday/</guid><description>Hack The Box. Linux. Máquina difícil. Esta máquina tiene una página web vulnerable a enumeración de usuarios. Luego, podemos hacer fuerza bruta a la contraseña de un usuario y ejecutar contenedores. Mediante un contenedor, podemos acceder a una web interna que tiene una API que muestra información sensible al explotar una vulnerabilidad de &lt;em>Type Juggling&lt;/em> y provee una función para usar expresiones regulares en archivos, por lo que podemos leer código fuente y la clave secreta de Flask. Luego, podemos falsificar una sesión del usuario &lt;code>jack&lt;/code> y descubrir que los contenedores de Docker permiten acceder a información de procesos de la máquina, por lo que podemos leer la clave privada de SSH de este usuario. Después, podemos ejecutar un intérprete de Python personalizado y escapar de la &lt;em>sandbox&lt;/em> para obtener una &lt;em>shell&lt;/em> como &lt;code>jack_adm&lt;/code>. Finalmente, hay una herramienta que genera &lt;em>hashes&lt;/em> con &lt;code>bcrypt&lt;/code>, y tenemos que abusar de una limitación de &lt;code>bcrypt&lt;/code> para extraer la pimienta secreta y romper el &lt;em>hash&lt;/em> de &lt;code>root&lt;/code> para escalar privilegios</description></item><item><title>Ambassador</title><link>https://7rocky.github.io/htb/ambassador/</link><pubDate>Sat, 28 Jan 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/ambassador/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina tiene una instancia de Grafana que es vulnerable a &lt;em>Directory Path Traversal&lt;/em> sin autenticación. Así, podemos leer archivos del servidor y encontrar la contraseña para Grafana y para MySQL. Después de eso, podemos conectarnos a MySQL, que está expuesto, y encontrar otra contraseña para acceder a través de SSH. La máquina ejecuta &lt;code>consul&lt;/code> internamente con una configuración vulnerable. Después de encontrar un &lt;em>token&lt;/em> de autenticación en un repositorio de Git, podemos usar un &lt;em>exploit&lt;/em> para obtener RCE en &lt;code>consul&lt;/code> y ganar acceso como &lt;code>root&lt;/code></description></item><item><title>OpenSource</title><link>https://7rocky.github.io/htb/opensource/</link><pubDate>Sat, 08 Oct 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/opensource/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina tiene una página web que expone su código fuente, siendo vulnerable a Directory Path Traversal. Con esta vulnerabilidad podemos leer los archivos necesarios para calcular el PIN de la consola de depuración de Flask y obtener ejecución remota de comandos en un contenedor Docker. Después, se necesita usar un reenvío de puertos para ver una instancia de Gitea y acceder con credenciales que se encuentran en un repositorio de Git. Aquí podemos ver la clave privada de SSH de un usuario de sistema. Existe una tarea Cron que confirma nuevos cambios de un repositorio Git que lleva a escalada de privilegios</description></item><item><title>Talkative</title><link>https://7rocky.github.io/htb/talkative/</link><pubDate>Sat, 27 Aug 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/talkative/</guid><description>Hack The Box. Linux. Máquina difícil. Esta máquina es un sitio web que expone una aplicación Jamovi donde podemos obtener una &lt;em>reverse shell&lt;/em> en un contenedor de Docker. Aquí encontramos algunas credenciales para una aplicación Bolt CMS, y conseguimos acceso como administrador. Desde aquí podemos modificar una plantilla escribiendo código PHP y ganar acceso a otro contenedor. Este tiene conectividad con el puerto 22 de la máquina, por lo que podemos acceder a la máquina usando las credenciales anteriores por SSH. Luego, encontramos otro contenedor que ejecuta MongoDB, que contiene la base de datos de un servidor Rocket.Chat. En este punto, podemos crear una nueva cuenta en Rocket.Chat y asignarnos el rol de administrador modificando la entrada de la base de datos. Después de eso, podemos establecer una nueva integración para obtener RCE en el contenedor que gestiona Rocket.Chat. Finalmente, este contenedor tiene habilitada la &lt;em>capability&lt;/em> &lt;code>CAP_DAC_READ_SEARCH&lt;/code>, que nos permite leer archivos de la máquina &lt;em>host&lt;/em> como &lt;code>root&lt;/code> usando un &lt;em>exploit&lt;/em>. Además, el contenedor también es vulnerable a otro &lt;em>exploit&lt;/em> para escribir archivos arbitrarios como &lt;code>root&lt;/code> en la máquina &lt;em>host&lt;/em></description></item><item><title>OverGraph</title><link>https://7rocky.github.io/htb/overgraph/</link><pubDate>Sat, 06 Aug 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/overgraph/</guid><description>Hack The Box. Linux. Máquina difícil. Esta máquina tiene una página web que es vulnerable a Open Redirect, una aplicación web hecha en AngularJS vulnerable a Client-Side Template Injection y XSS, y una implementación de GraphQL. Somos capaces de registrar una nueva cuenta al saltarnos un código OTP mediante una inyección NoSQL. Luego, podemos realizar un ataque de CSRF abusando del Open Redirect para inyectar un payload de XSS en el perfil de la víctima para obtener su adminToken, que está guardado en localStorage. Después, podemos subir archivos de video que serán procesados por ffmpeg y explotar un Server-Side Request Forgery que nos permite leer archivos del servidor. Finalmente, ganaremos acceso a la máquina como un usuario y podemos encontrar un binario está en ejecución como root. Después de analizarlo, podemos obtener un token válido para usar el programa y exploitar una vulnerabilidad para escribir datos arbitrarios en una dirección arbitraria, derivando en RCE o permisos de lectura como root</description></item><item><title>Pandora</title><link>https://7rocky.github.io/htb/pandora/</link><pubDate>Sat, 21 May 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/pandora/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina expone información sensible por SNMP que permite acceder a la máquina. Luego, encontramos una instancia local de Pandora FMS que tiene varias vulnerabilidades y pueden ser explotadas para conseguir RCE como otro usuario. Este usuario puede ejecutar un binario SUID que es vulnerable a PATH hijacking, pero el ataque tiene que ser realizado desde una sesión de SSH. Para comprometer esta máquina se necesitan habilidades de enumeración y pentesting básicas</description></item><item><title>Hancliffe</title><link>https://7rocky.github.io/htb/hancliffe/</link><pubDate>Sat, 05 Mar 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/hancliffe/</guid><description>Hack The Box. Windows. Máquina difícil. Esta máquina tiene una página web que esconde una aplicación Nuxeo en Java vulnerable a SSTI después de romper la lógica de nginx. Luego accedemos a la máquina y encontramos una aplicación con un exploit público para acceder como otro usuario. Después, extraemos credenciales de Firefox y usamos un generador de contraseñas para acceder como otro usuario y encontrar un ejecutable de Windows. Después de hacer ingeniería inversa para obtener las credenciales esperadas, encontramos una vulnerabilidad de Buffer Overflow que necesita ser explotada mediante Socket Reuse para acceder como Administrator</description></item><item><title>Horizontall</title><link>https://7rocky.github.io/htb/horizontall/</link><pubDate>Sat, 05 Feb 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/horizontall/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina tiene una página web que esconde un subdominio válido con una aplicación web de Strapi vulnerable a RCE. Existe también una aplicación web interna hecha con Laravel vulnerable a RCE. Para comprometer esta máquina es necesario conocimiento sobre JavaScript, PHP y Python, además de conocer técnicas de reenvío de puertos. En esta máquina se utiliza un script en Python personalizado que encadena dos exploits para Strapi necesarios para ganar RCE</description></item><item><title>Static</title><link>https://7rocky.github.io/htb/static/</link><pubDate>Sat, 18 Dec 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/static/</guid><description>Hack The Box. Linux. Máquina difícil. Esta máquina contiene una página web que expone un archivo Gzip corrupto que necesita ser corregido para obtener una clave de TOTP y descargar un archivo VPN. Luego, hay algunos servicios PHP vulnerables que pueden ser comprometidos para llegar a un servidor interno que contiene un archivo binario ejecutable que tiene una vulnerabilidad de Format String. Para comprometer esta máquina se necesitan conocimientos avanzados de pivoting y reenvío de puertos, además de enumeración web, explotación de PHP y explotación de Format String. En este write-up se utiliza un script personalizado de Ruby para automatizar el proceso de descarga del archivos VPN, un script de Python para ganar RCE sobre un servidor web PHP y otro script de Python para la explotación del binario mediante Format String</description></item><item><title>Explore</title><link>https://7rocky.github.io/htb/explore/</link><pubDate>Sat, 30 Oct 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/explore/</guid><description>Hack The Box. Android. Máquina fácil. Se trata de dispositivo móvil Android que contiene una aplicación vulnerable a lectura de archivos del dispositivo, a través de la cual se obtienen credenciales de acceso por SSH para poder escalar privilegios. Para comprometer el dispositivo, se necesitan conceptos de escaneo de puertos, reenvío de puertos y Android</description></item><item><title>Spider</title><link>https://7rocky.github.io/htb/spider/</link><pubDate>Sat, 23 Oct 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/spider/</guid><description>Hack The Box. Linux. Máquina difícil. Esta máquina contiene una página web vulnerable a Server-Site Template Injection (SSTI) en dos puntos e inyección de código SQL (SQLi), y otra página interna vulnerable a inyección de entidades externas XML (XXE). Para comprometer esta máquina se necesitan conocimientos avanzados de SSTI y evasión de filtros, SQLi, XXE y reenvío de puertos. En este write-up se utiliza un script en Python para explotar un SSTI y un script en Bash para leer archivos mediante XXE</description></item><item><title>Monitors</title><link>https://7rocky.github.io/htb/monitors/</link><pubDate>Sat, 09 Oct 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/monitors/</guid><description>Hack The Box. Linux. Máquina difícil. Esta máquina contiene una página web de WordPress con un plugin vulnerable a navegación de directorios, otra página web vulnerable a inyección de código SQL y otra más vulnerable a deserialización insegura dentro de un contenedor de Docker con capabilities habilitadas. Para comprometer la máquina se necesitan conocimientos avanzados de enumeración web, vulnerabilidades y técnicas de explotación, además de técnicas de reenvío de puertos y para escapar de Docker. En este write-up se utiliza un script en Bash personalizado para explotar la deserialización insegura</description></item><item><title>Antique</title><link>https://7rocky.github.io/htb/antique/</link><pubDate>Mon, 27 Sep 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/antique/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina es una impresora HP JetDirect que expone la contraseña por SNMP y tiene una vulnerabilidad de lectura privilegiada de archivos. Para comprometer la máquina se necesitan técnicas de enumeración por SNMP y reenvío de puertos. En este write-up se utiliza un programa en Java personalizado para automatizar un ataque de SQLi</description></item><item><title>Rope</title><link>https://7rocky.github.io/htb/rope/</link><pubDate>Sat, 23 May 2020 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/rope/</guid><description>Hack The Box. Linux. Máquina insana. Esta máquina expone un servidor web que es vulnerable a navegación de directorios, por lo que podemos leer archivos y descubrir que se trata de un archivo binario. Después de analizar el binario, descubrimos que tiene una vulnerabilidad de &lt;em>Format String&lt;/em> que puede ser explotada para conseguir RCE como &lt;code>john&lt;/code>. Este usuario puede ejecutar otro binario como el usuario &lt;code>r4j&lt;/code>. Este binario utiliza una librería externa que podemos modificar debido a los permisos que tiene y ganar acceso como &lt;code>r4j&lt;/code>. Finalmente, existe otro binario que ejecuta un servidor de &lt;em>socket&lt;/em> en local, podemos acceder al binario y analizarlo para encontrar una vulnerabilidad de &lt;em>Buffer Overflow&lt;/em>. El binario tiene todas las protecciones activas, pero sigue siendo explotable para conseguir RCE como &lt;code>root&lt;/code></description></item></channel></rss>