<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>sudo on Blog de 7Rocky. Ciberseguridad y Mates</title><link>https://7rocky.github.io/tags/sudo/</link><description>Recent content in sudo on Blog de 7Rocky. Ciberseguridad y Mates</description><generator>Hugo -- gohugo.io</generator><language>es</language><lastBuildDate>Sat, 22 Apr 2023 00:00:00 +0100</lastBuildDate><atom:link href="https://7rocky.github.io/tags/sudo/index.xml" rel="self" type="application/rss+xml"/><item><title>Investigation</title><link>https://7rocky.github.io/htb/investigation/</link><pubDate>Sat, 22 Apr 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/investigation/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina tiene un sitio web que permite analizar los metadatos de un archivo de imagen con &lt;code>exiftool&lt;/code>. Sin embargo, la versión es vulnerable a inyección de comandos y se puede usar para acceder al sistema. Luego, encontramos algunos registros de eventos de Windows y una contraseña en texto claro como nombre de usuario, probablemente un error. Después de eso, obtenemos acceso como otro usuario que puede ejecutar un binario con &lt;code>sudo&lt;/code>, que por detrás ejecuta un &lt;em>script&lt;/em> en Perl que conduce a la escalada de privilegios</description></item><item><title>Forgot</title><link>https://7rocky.github.io/htb/forgot/</link><pubDate>Sat, 04 Mar 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/forgot/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina tiene un sitio web que es vulnerable a envenenamiento de recuperación de contraseñas y envenenamiento de caché web. Ambas vulnerabilidades se pueden usar para obtener acceso a una cuenta normal y luego obtener la &lt;em>cookie&lt;/em> del administrador, respectivamente. Después de eso, podemos leer un &lt;em>ticket&lt;/em> con credenciales de SSH. Luego, podemos ejecutar un &lt;em>script&lt;/em> de &lt;em>Machine Learning&lt;/em> como &lt;code>root&lt;/code> usando &lt;code>sudo&lt;/code>, y hay una librería con una versión vulnerable donde podemos inyectar código Python para escalar privilegios</description></item><item><title>RainyDay</title><link>https://7rocky.github.io/htb/rainyday/</link><pubDate>Sat, 18 Feb 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/rainyday/</guid><description>Hack The Box. Linux. Máquina difícil. Esta máquina tiene una página web vulnerable a enumeración de usuarios. Luego, podemos hacer fuerza bruta a la contraseña de un usuario y ejecutar contenedores. Mediante un contenedor, podemos acceder a una web interna que tiene una API que muestra información sensible al explotar una vulnerabilidad de &lt;em>Type Juggling&lt;/em> y provee una función para usar expresiones regulares en archivos, por lo que podemos leer código fuente y la clave secreta de Flask. Luego, podemos falsificar una sesión del usuario &lt;code>jack&lt;/code> y descubrir que los contenedores de Docker permiten acceder a información de procesos de la máquina, por lo que podemos leer la clave privada de SSH de este usuario. Después, podemos ejecutar un intérprete de Python personalizado y escapar de la &lt;em>sandbox&lt;/em> para obtener una &lt;em>shell&lt;/em> como &lt;code>jack_adm&lt;/code>. Finalmente, hay una herramienta que genera &lt;em>hashes&lt;/em> con &lt;code>bcrypt&lt;/code>, y tenemos que abusar de una limitación de &lt;code>bcrypt&lt;/code> para extraer la pimienta secreta y romper el &lt;em>hash&lt;/em> de &lt;code>root&lt;/code> para escalar privilegios</description></item><item><title>Photobomb</title><link>https://7rocky.github.io/htb/photobomb/</link><pubDate>Sat, 11 Feb 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/photobomb/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina contiene una aplicación web hecha con Sinatra que es vulnerable a inyección de comandos, que deriva en ejecución remota de comandos (RCE). El usuario tiene permisos de &lt;code>sudo&lt;/code> para ejecutar un &lt;em>script&lt;/em> en Bash que es vulnerable a &lt;code>PATH&lt;/code> &lt;em>hijacking&lt;/em>, y se puede utilizar para escalar privilegios</description></item><item><title>UpDown</title><link>https://7rocky.github.io/htb/updown/</link><pubDate>Sat, 21 Jan 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/updown/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina tiene un sitio web que tiene un directorio de desarrollo y expone un repositorio de Git. Usando esto, podemos encontrar alguna funcionalidad que esté oculta excepto para los desarrolladores y que se pueda abusar para obtener RCE después de planificar el ataque y saltarnos las &lt;code>disable_functions&lt;/code> en PHP. En la máquina, hay un binario SUID compilado de un &lt;em>script&lt;/em> en Python, que puede ser abusado con un ataque de &lt;em>library hijacking&lt;/em>. Finalmente, el usuario puede ejecutar &lt;code>easy_install&lt;/code> con &lt;code>sudo&lt;/code>, lo que conduce a la escalada de privilegios</description></item><item><title>Shoppy</title><link>https://7rocky.github.io/htb/shoppy/</link><pubDate>Sat, 14 Jan 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/shoppy/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina tiene una página web vulnerable a inyección NoSQL. Mediante esta vulnerabilidad, podemos saltarnos la autenticación y listar hashes de contraseñas que se pueden romper. Luego, al enumerar subdominios encontramos una aplicación MatterMost a la que podemos entrar y ver credenciales de acceso por SSH. El primer usuario puede ejecutar un binario ELF personalizado que muestra más credenciales al usar una contraseña maestra. Finalmente, podemos escalar privilegios porque el segundo usuario pertenece al grupo docker</description></item><item><title>Trick</title><link>https://7rocky.github.io/htb/trick/</link><pubDate>Sat, 29 Oct 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/trick/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina tiene un servicio DNS que es vulnerable a un ataque de transferencia de zona que fuga un subdominio. Aquí podemos saltarnos la autenticación con SQLi y explotar un LFI. Con ambas vulnerabilidades encadenadas podemos acceder a la máquina. Luego, podemos encontrar otro subdominio que de nuevo es vulnerable a LFI, y con este obtenemos la clave privada de SSH de un usuario. Este usuario puede reiniciar fail2ban con sudo y modificar archivos de configuración</description></item><item><title>Faculty</title><link>https://7rocky.github.io/htb/faculty/</link><pubDate>Sat, 22 Oct 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/faculty/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina tiene una página web vulnerable a SQLi y salto de autenticación que lleva a otra página en la que podemos exportar contenido HTML a PDF. Existe una vulnerabilidad en la que podemos adjuntar archivos locales al fichero PDF y leer una contraseña reutilizada para SSH. Mediante sudo podemos ejecutar un script en Node.js como otro usuario y explotar una inyección de comandos. Este segundo usuario puede ejecutar GDB y además GDB tiene la capability cap_sys_ptrace activada, por lo que podemos depurar un proceso en ejecución por root y ejecutar código arbitrario</description></item><item><title>RouterSpace</title><link>https://7rocky.github.io/htb/routerspace/</link><pubDate>Sat, 09 Jul 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/routerspace/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina tiene un archivo APK con una app sencilla. Esta app realiza una petición web a una API que tiene que ser capturada con un proxy, y esta API es vulnerable a inyección de comandos. Después, el acceso a la máquina se puede realizar por SSH y una enumeración básica muestra que la versión de sudo es vulnerable</description></item><item><title>Paper</title><link>https://7rocky.github.io/htb/paper/</link><pubDate>Sat, 18 Jun 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/paper/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina contiene una página web en WordPress con información secreta en borradores, y también un chat con un bot que muestra información sensible. Después, el servidor es vulnerable a PolKit. Para comprometer esta máquina se necesitan conocimientos de enumeración en WordPress</description></item><item><title>Meta</title><link>https://7rocky.github.io/htb/meta/</link><pubDate>Sat, 11 Jun 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/meta/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina tiene una página web que analiza imágenes subidas con una versión vulnerable de exiftool que deriva en RCE. Luego, existe una tarea Cron que transforma imágenes con el comando mogrify de ImageMagick, que es vulnerable a inyección de comandos. Finalmente, tenemos permisos de sudo para ejecutar neofetch, lo cual posibilita la escalada de privilegios</description></item><item><title>Timing</title><link>https://7rocky.github.io/htb/timing/</link><pubDate>Sat, 04 Jun 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/timing/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina tiene una aplicación web en PHP que es vulnerable a enumeración de usuarios, LFI, Type Juggling y SQLi, aparte de otros errores y malas configuraciones. Después de leer el código PHP, se encuentra una manera de subir un archivo PHP para conseguir RCE. Luego encontramos una contraseña en un repositorio de Git y accedemos por SSH. Entonces, podemos ejecutar un archivo JAR con sudo que descarga archivos como root, y se puede usar un enlace simbólico para escribir una clave SSH como autorizada para root</description></item><item><title>Unicode</title><link>https://7rocky.github.io/htb/unicode/</link><pubDate>Sat, 07 May 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/unicode/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina utiliza tokens JWT con JWKS y JKU que pueden ser falsificados para llegar a una vulnerabilidad de navegación de directorios que puede ser explotada mediante caracteres Unicode. Después, existe un binario compilado con Python que puede ejecutarse con sudo y usa curl por detrás. Para comprometer esta máquina se necesitan conocimientos sobre JWT y técnicas de bypassing para navegación de directorios e inyección de comandos. En este write-up se utiliza un script en Python para explotar la navegación de directorios usando JWT y JWKS</description></item><item><title>Forge</title><link>https://7rocky.github.io/htb/forge/</link><pubDate>Sat, 22 Jan 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/forge/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina es vulnerable a Server-Side Request Forgery (SSRF) desde un subdominio hacia un servidor FTP. Despuñes, existen permisos de sudo para ejecutar un script de Python con un depurador. Para comprometer esta máquina se necesitan conocimientos básicos de pentesting web. En este write-up se utiliza un script en Python personalizado para explotar el SSRF</description></item><item><title>NodeBlog</title><link>https://7rocky.github.io/htb/nodeblog/</link><pubDate>Mon, 10 Jan 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/nodeblog/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina contiene un blog que es vulnerable a inyección NoSQL, luego a inyección de Entidades Externas XML (XXE) y finalmente a deserialización insegura para obtener ejecución remota de comandos. Para comprometer esta máquina se necesitan técnicas avanzadas de explotación web y habilidades de programación. En este write-up se utilizan scripts en Bash, Python y Node.js para explotar todas las vulnerabilidades</description></item><item><title>Previse</title><link>https://7rocky.github.io/htb/previse/</link><pubDate>Sat, 08 Jan 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/previse/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina tiene una página web vulnerable a inyección de comandos después de burlar redirecciones y conseguir registrar una nueva cuenta. Después, hay que romper un hash para acceder como usuario de bajos privilegios y realizar PATH hijacking mediante sudo. Para comprometer esta máquina se necesitan conocimientos básicos de pentesting web y Burp Suite, así como técnicas de escalada de privilegios comunes. En este write-up se utiliza un programa en Go personalizado para automatizar la intrusión</description></item><item><title>Union</title><link>https://7rocky.github.io/htb/union/</link><pubDate>Mon, 22 Nov 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/union/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina contiene vulnerabilidades de inyección de código SQL (SQLi) e inyección de comandos. Para comprometer la máquina se necesitan algunas técnicas de evasión de SQLi y análisis de código fuente. En este write-up se utiliza un programa en Java personalizado para automatizar un ataque de SQLi</description></item><item><title>BountyHunter</title><link>https://7rocky.github.io/htb/bountyhunter/</link><pubDate>Sat, 20 Nov 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/bountyhunter/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina tiene una página web vulnerable a inyeccción de entidades externas XML (XXE) además de permisios de sudo configurados. Para comprometer la máquina se necesitan conocimientos sobre XXE, PHP y Python. En este write-up se utiliza un script en Bash para leer archivos del servidor explotando el XXE</description></item><item><title>Seal</title><link>https://7rocky.github.io/htb/seal/</link><pubDate>Sat, 13 Nov 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/seal/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina contiene una página web de Tomcat montada sobre nginx, lo cual es una configuración vulnerable que desemboca en ejecución remota de comandos (RCE), y también tiene malas configuraciones de permisos en archivos y comandos con sudo. Para comprometer esta máquina se necesitan conocimientos sobre explotación de Tomcat y el sistema de archivos de Linux</description></item><item><title>dynstr</title><link>https://7rocky.github.io/htb/dynstr/</link><pubDate>Sat, 16 Oct 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/dynstr/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina utiliza un servicio de DNS dinámico vulnerable a inyección de comandos y existen permisos de sudo en la máquina sobre un comando con un wildcard. Para comprometer la máquina se necesitan conocimientos de DNS, técnicas de inyección de comandos y abuso de wildcard</description></item><item><title>Knife</title><link>https://7rocky.github.io/htb/knife/</link><pubDate>Sat, 28 Aug 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/knife/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina contiene una página web en una versión de PHP con una puerta trasera y permisos de sudo configurados. Para comprometer la máquina se necesita conocer la versión de PHP y técnicas básicas de escalada de privilegios</description></item><item><title>Rope</title><link>https://7rocky.github.io/htb/rope/</link><pubDate>Sat, 23 May 2020 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/rope/</guid><description>Hack The Box. Linux. Máquina insana. Esta máquina expone un servidor web que es vulnerable a navegación de directorios, por lo que podemos leer archivos y descubrir que se trata de un archivo binario. Después de analizar el binario, descubrimos que tiene una vulnerabilidad de Format String que puede ser explotada para conseguir RCE como john. Este usuario puede ejecutar otro binario como el usuario r4j. Este binario utiliza una librería externa que podemos modificar debido a los permisos que tiene y ganar acceso como r4j. Finalmente, existe otro binario que ejecuta un servidor de sockets en local, podemos acceder al binario y analizarlo para encontrar una vulnerabilidad de Buffer Overflow. El binario tiene todas las protecciones activas, pero sigue siendo explotable para conseguir RCE como root</description></item><item><title>Mirai</title><link>https://7rocky.github.io/htb/mirai/</link><pubDate>Sat, 10 Feb 2018 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/mirai/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina es un dispositivo Raspberry Pi que tiene configuradas las credenciales por defecto, por lo que podemos acceder por SSH y convertirnos en root porque pertenecemos al grupo sudo. Para obtener la flag root.txt, tenemos que hacer una copia completa de un dispositivo de almacenamiento USB</description></item></channel></rss>