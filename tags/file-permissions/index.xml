<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>File-Permissions on Blog de 7Rocky. Ciberseguridad y Mates</title><link>https://7rocky.github.io/tags/file-permissions/</link><description>Recent content in File-Permissions on Blog de 7Rocky. Ciberseguridad y Mates</description><generator>Hugo</generator><language>es</language><lastBuildDate>Sun, 08 Sep 2024 18:56:03 +0200</lastBuildDate><atom:link href="https://7rocky.github.io/tags/file-permissions/index.xml" rel="self" type="application/rss+xml"/><item><title>Sandworm</title><link>https://7rocky.github.io/htb/sandworm/</link><pubDate>Sat, 18 Nov 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/sandworm/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina tiene un sitio web que permite cifrar, descifrar y verificar firmas con PGP. El sitio web es vulnerable a SSTI en Flask, que es la forma de acceder a la máquina como &lt;code>atlas&lt;/code>. Sin embargo, este entorno es limitado debido a &lt;code>firejail&lt;/code>, pero podemos encontrar una contraseña en texto claro para entrar como &lt;code>silentobserver&lt;/code> por SSH. Como este usuario, podemos modificar un proyecto de Rust que se utiliza en otro proyecto de Rust que se ejecuta periódicamente como &lt;code>atlas&lt;/code>. Con este poder, podemos obtener acceso como &lt;code>atlas&lt;/code> nuevamente, pero fuera de &lt;code>firejail&lt;/code>. Finalmente, dado que &lt;code>firejail&lt;/code> es un binario SUID, podemos usar un &lt;em>exploit&lt;/em> público para convertirnos en &lt;code>root&lt;/code></description></item><item><title>Topology</title><link>https://7rocky.github.io/htb/topology/</link><pubDate>Sat, 04 Nov 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/topology/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina contiene un sitio web que permite generar ecuaciones con LaTeX. Con esta funcionalidad podemos leer archivos arbitrarios del servidor con técnicas de inyección de LaTeX y encontrar un el &lt;em>hash&lt;/em> de una contraseña para otro subdominio. Esta contraseña se reutiliza en SSH. Después de eso, &lt;code>root&lt;/code> está ejecutando scripts con &lt;code>gnuplot&lt;/code> periódicamente, lo que lleva a la escalada de privilegios</description></item><item><title>Awkward</title><link>https://7rocky.github.io/htb/awkward/</link><pubDate>Sat, 25 Feb 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/awkward/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina tiene un sitio web en Vue.js que expone un formulario de inicio de sesión que se puede saltar fácilmente. Luego encontramos una API que prueba la conectividad de otros sitios web, que puede explotarse utilizando &lt;em>Server-Side Request Forgery&lt;/em> para encontrar la documentación de la API. Allí tenemos código Node.js para analizar y ver cómo podemos saltar algunas validaciones para obtener información de los usuarios y romper el &lt;em>hash&lt;/em> de una contraseña. Después de eso, podemos iniciar sesión, obtener un &lt;em>token&lt;/em> JWT válido y romperlo para encontrar el secreto. Por lo tanto, podemos crear cualquier &lt;em>token&lt;/em> JWT, lo que significa que podemos inyectar cualquier &lt;em>payload&lt;/em> como información del &lt;em>token&lt;/em>. Usando este poder, podemos leer archivos arbitrarios del servidor explotando &lt;code>awk&lt;/code> y encontrar credenciales en texto claro dentro de un archivo comprimido. A continuación, podemos acceder por SSH y encontrar otro sitio web construido en PHP con dos vulnerabilidades. También hay una tarea Cron que toma información de un archivo CSV para enviar un correo electrónico. La clave aquí es inyectar un parámetro malicioso en el archivo CSV para que el comando &lt;code>mail&lt;/code> ejecute un &lt;em>script&lt;/em> malicioso, que lleva a la escalada de privilegios</description></item><item><title>RainyDay</title><link>https://7rocky.github.io/htb/rainyday/</link><pubDate>Sat, 18 Feb 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/rainyday/</guid><description>Hack The Box. Linux. Máquina difícil. Esta máquina tiene una página web vulnerable a enumeración de usuarios. Luego, podemos hacer fuerza bruta a la contraseña de un usuario y ejecutar contenedores. Mediante un contenedor, podemos acceder a una web interna que tiene una API que muestra información sensible al explotar una vulnerabilidad de &lt;em>Type Juggling&lt;/em> y provee una función para usar expresiones regulares en archivos, por lo que podemos leer código fuente y la clave secreta de Flask. Luego, podemos falsificar una sesión del usuario &lt;code>jack&lt;/code> y descubrir que los contenedores de Docker permiten acceder a información de procesos de la máquina, por lo que podemos leer la clave privada de SSH de este usuario. Después, podemos ejecutar un intérprete de Python personalizado y escapar de la &lt;em>sandbox&lt;/em> para obtener una &lt;em>shell&lt;/em> como &lt;code>jack_adm&lt;/code>. Finalmente, hay una herramienta que genera &lt;em>hashes&lt;/em> con &lt;code>bcrypt&lt;/code>, y tenemos que abusar de una limitación de &lt;code>bcrypt&lt;/code> para extraer la pimienta secreta y romper el &lt;em>hash&lt;/em> de &lt;code>root&lt;/code> para escalar privilegios</description></item><item><title>UpDown</title><link>https://7rocky.github.io/htb/updown/</link><pubDate>Sat, 21 Jan 2023 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/updown/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina tiene un sitio web que tiene un directorio de desarrollo y expone un repositorio de Git. Usando esto, podemos encontrar alguna funcionalidad que esté oculta excepto para los desarrolladores y que se pueda abusar para obtener RCE después de planificar el ataque y saltarnos las &lt;code>disable_functions&lt;/code> en PHP. En la máquina, hay un binario SUID compilado de un &lt;em>script&lt;/em> en Python, que puede ser abusado con un ataque de &lt;em>library hijacking&lt;/em>. Finalmente, el usuario puede ejecutar &lt;code>easy_install&lt;/code> con &lt;code>sudo&lt;/code>, lo que conduce a la escalada de privilegios</description></item><item><title>Trick</title><link>https://7rocky.github.io/htb/trick/</link><pubDate>Sat, 29 Oct 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/trick/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina tiene un servicio DNS que es vulnerable a un ataque de transferencia de zona que fuga un subdominio. Aquí podemos saltarnos la autenticación con SQLi y explotar un LFI. Con ambas vulnerabilidades encadenadas podemos acceder a la máquina. Luego, podemos encontrar otro subdominio que de nuevo es vulnerable a LFI, y con este obtenemos la clave privada de SSH de un usuario. Este usuario puede reiniciar fail2ban con sudo y modificar archivos de configuración</description></item><item><title>Late</title><link>https://7rocky.github.io/htb/late/</link><pubDate>Sat, 30 Jul 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/late/</guid><description>Hack The Box. Linux. Máquina fácil. Esta máquina contiene una aplicación web en Flask que extrae texto de imágenes y lo renderiza, siendo vulnerable a SSTI. Luego, existe un PAM configurado para SSH con rutas relativas, que puede ser abusado debido a ciertos privilegios para sobrescribir ejecutables. Para comprometer esta máquina se necesitan conocimientos básicos de explotación web y de enumeración en Linux</description></item><item><title>Acute</title><link>https://7rocky.github.io/htb/acute/</link><pubDate>Sat, 16 Jul 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/acute/</guid><description>Hack The Box. Windows. Máquina difícil. Esta máquina expone una página web donde se puede encontrar un documento de Word con información sensible y nombres de usuarios. Existe un acceso web a PowerShell en el cual podemos acceder utilizando una credencial débil y extraer otra contraseña a partir de una captura de pantalla. Existe un controlador de dominio de un entorno de Active Directory donde podemos ejecutar comandos como otros usuarios. Podremos conectarnos a la primera máquina y extraer hashes NTLM y finalmente convertirnos en administrador del dominio. Para comprometer esta máquina se necesitan conocimientos de PowerShell y técnicas básicas de explotación de Windows y Active Directory</description></item><item><title>Overflow</title><link>https://7rocky.github.io/htb/overflow/</link><pubDate>Sat, 09 Apr 2022 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/overflow/</guid><description>Hack The Box. Linux. Máquina difícil. Esta máquina contiene una página web vulnerable a Padding Oracle Attack y Bit Flipper Attack para iniciar sesión como admin y también vulnerable a SQLi por un CMS. Existe otro subdominio que usa una versión de exiftool que tiene una vulnerabilidad de RCE. Una vez en la máquina, los movimientos laterales son relativamente fáciles y la escalada de privilegios consiste en ingeniería inversa y explotación de una vulnerabilidad de Buffer Overflow en un binario SUID. Para comprometer esta máquina se necesitan conocimientos avanzados de explotación web, criptografía y explotación de binarios. En este write-up se utiliza un script en Python para efectuar un Bit Flipper Attack y un script en Ruby para SQLi</description></item><item><title>Writer</title><link>https://7rocky.github.io/htb/writer/</link><pubDate>Sat, 11 Dec 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/writer/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina contiene una página web vulnerable a inyección de código SQL. Esto permite leer el código fuente del servidor y encontrar una vulnerabilidad. Después, se utilizan varias técnicas de inyección de comandos para escalar privilegios. Para comprometer la máquina, se necesita programar una explotación automática de SQLi y conocimientos de SMB, SMTP y tareas Cron. En este write-up se utilizan scripts en Python personalizados para SQLi y para la intrusión</description></item><item><title>Seal</title><link>https://7rocky.github.io/htb/seal/</link><pubDate>Sat, 13 Nov 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/seal/</guid><description>Hack The Box. Linux. Máquina media. Esta máquina contiene una página web de Tomcat montada sobre nginx, lo cual es una configuración vulnerable que desemboca en ejecución remota de comandos (RCE), y también tiene malas configuraciones de permisos en archivos y comandos con sudo. Para comprometer esta máquina se necesitan conocimientos sobre explotación de Tomcat y el sistema de archivos de Linux</description></item><item><title>Monitors</title><link>https://7rocky.github.io/htb/monitors/</link><pubDate>Sat, 09 Oct 2021 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/monitors/</guid><description>Hack The Box. Linux. Máquina difícil. Esta máquina contiene una página web de WordPress con un plugin vulnerable a navegación de directorios, otra página web vulnerable a inyección de código SQL y otra más vulnerable a deserialización insegura dentro de un contenedor de Docker con capabilities habilitadas. Para comprometer la máquina se necesitan conocimientos avanzados de enumeración web, vulnerabilidades y técnicas de explotación, además de técnicas de reenvío de puertos y para escapar de Docker. En este write-up se utiliza un script en Bash personalizado para explotar la deserialización insegura</description></item><item><title>Rope</title><link>https://7rocky.github.io/htb/rope/</link><pubDate>Sat, 23 May 2020 00:00:00 +0100</pubDate><guid>https://7rocky.github.io/htb/rope/</guid><description>Hack The Box. Linux. Máquina insana. Esta máquina expone un servidor web que es vulnerable a navegación de directorios, por lo que podemos leer archivos y descubrir que se trata de un archivo binario. Después de analizar el binario, descubrimos que tiene una vulnerabilidad de &lt;em>Format String&lt;/em> que puede ser explotada para conseguir RCE como &lt;code>john&lt;/code>. Este usuario puede ejecutar otro binario como el usuario &lt;code>r4j&lt;/code>. Este binario utiliza una librería externa que podemos modificar debido a los permisos que tiene y ganar acceso como &lt;code>r4j&lt;/code>. Finalmente, existe otro binario que ejecuta un servidor de &lt;em>socket&lt;/em> en local, podemos acceder al binario y analizarlo para encontrar una vulnerabilidad de &lt;em>Buffer Overflow&lt;/em>. El binario tiene todas las protecciones activas, pero sigue siendo explotable para conseguir RCE como &lt;code>root&lt;/code></description></item></channel></rss>